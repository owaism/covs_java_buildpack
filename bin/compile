#!/usr/bin/env bash
# bin/compile <build-dir> <cache-dir>

set -e            # fail fast
set -o pipefail   # don't ignore exit codes when piping output
# set -x          # enable debugging

# Configure directories
build_dir=$1
cache_dir=$2


compile_buildpack_dir=$(cd $(dirname $0); cd ..; pwd)
compile_buildpack_bin=$compile_buildpack_dir/bin

cd $build_dir
mkdir -p $cache_dir

echo "Invoking Ruby Compile"

ruby $compile_buildpack_bin/compile.rb $build_dir $cache_dir $compile_buildpack_dir
